<!-- Table of Question Groups -->
<div class="d-flex justify-content-between align-items-center title mt-4">
    <span>2. Question Groups</span>
    <div class="d-flex justify-content-end">
        <button cButton type="button" (click)="toggleCreateQuestionGroupModal()"
            class="btn-success text-white d-flex align-items-center">
            <svg [cIcon]="icons.cilPlus" width="22" class="text-white" title="Plus Icon"></svg>
        </button>
    </div>
</div>
@if(questionGroups.length > 0) {
<table cTable>
    <thead>
        <tr>
            <th scope="col">No.</th>
            <th scope="col">NameEN</th>
            <th scope="col">NameVN</th>
            <th scope="col">Priority</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @for(item of questionGroups; track $index; let i = $index) {
        <tr>
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ item.nameEN }}</td>
            <td>{{ item.nameVN }}</td>
            <td>{{ item.priority }}</td>
            <td class="text-end">
                @if((item?.questions?.length ?? 0) > 0) {
                <button (click)="toggleQuestionNode(item)" class="btn btn-info me-2">
                    <app-book-icon [open]="item.expanded ?? false" [size]="20"></app-book-icon>
                </button>
                }
                <button cButton type="button" class="btn-success text-white me-2">
                    <svg [cIcon]="icons.cilPlus" width="20" class="text-white" title="Edit Icon"></svg>
                </button>
                <button cButton type="button" (click)="updateQuestionGroup(i)" class="btn-primary text-white me-2">
                    <svg [cIcon]="icons.cilPen" width="20" class="text-white" title="Edit Icon"></svg>
                </button>
                <button cButton type="button" (click)="deleteQuestionGroup(i)" class="btn-danger text-white">
                    <svg [cIcon]="icons.cilTrash" width="20" class="text-white" title="Trash Icon"></svg>
                </button>
            </td>
        </tr>
        @if(item.expanded && (item?.questions?.length ?? 0) > 0) {
        @for(item1 of item.questions; track $index; let j = $index) {
        <ng-container>
            <ng-container [ngTemplateOutlet]="questionTemplate"
                [ngTemplateOutletContext]="{ node: item1, index: j, level: 1 }"></ng-container>
        </ng-container>
        }
        }
        }
    </tbody>
</table>
} @else {
<div class="text-center my-4">
    No question group available.
</div>
}
<!-- Table of Questions -->
<div class="d-flex justify-content-between align-items-center title mt-4">
    <span>3. Questions</span>
    <div class="d-flex justify-content-end">
        <button cButton type="button" (click)="toggleCreateQuestionModal()"
            class="btn-success text-white d-flex align-items-center">
            <svg [cIcon]="icons.cilPlus" width="22" class="text-white" title="Plus Icon"></svg>
        </button>
    </div>
</div>
@if(questions.length > 0) {
<table cTable>
    <thead>
        <tr>
            <th scope="col">No.</th>
            <th scope="col">NameEN</th>
            <th scope="col">NameVN</th>
            <th scope="col">Priority</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @for(item of questions; track $index; let i = $index) {
        <ng-container>
            <ng-container [ngTemplateOutlet]="questionTemplate"
                [ngTemplateOutletContext]="{ node: item, index: i, level: 0 }"></ng-container>
        </ng-container>
        }
    </tbody>
</table>
} @else {
<div class="text-center my-4">
    No question available.
</div>
}

<!-- Question Template -->
<ng-template #questionTemplate let-node="node" let-level="level" let-index="index">
    <tr class="tree-row" [class.expanded]="node.expanded" [class.children]="level > 0">
        <th>
            <span [ngStyle]="{'margin-left.px': level * 15}">
                {{ index + 1 }}
            </span>
        </th>
        <td>{{ node.nameEN }}</td>
        <td>{{ node.nameVN }}</td>
        <td>{{ node.priority }}</td>
        <td class="text-end">
            @if((node.predefinedAnswers?.length ?? 0) > 0) {
            <button (click)="togglePredefinedAnswerNode(node)" class="btn btn-info me-2">
                <app-book-icon [open]="node.expanded ?? false" [size]="20"></app-book-icon>
            </button>
            }
            <button cButton type="button" (click)="updateQuestion(index)" class="btn-primary text-white me-2">
                <svg [cIcon]="icons.cilPen" width="20" class="text-white" title="Edit Icon"></svg>
            </button>
            <button cButton type="button" (click)="deleteQuestion(index)" class="btn-danger text-white">
                <svg [cIcon]="icons.cilTrash" width="20" class="text-white" title="Trash Icon"></svg>
            </button>
        </td>
    </tr>
    @if(node.expanded && (node?.predefinedAnswers?.length ?? 0) > 0) {
    @for(item1 of node.predefinedAnswers; track $index; let j = $index) {
    <ng-container>
        <ng-container [ngTemplateOutlet]="predefinedAnswerTemplate"
            [ngTemplateOutletContext]="{ node: item1, index: j, level: level + 1 }"></ng-container>
    </ng-container>
    }
    }
</ng-template>
<ng-template #predefinedAnswerTemplate let-node="node" let-level="level" let-index="index">
    <tr class="tree-row" [class.expanded]="node.expanded" [class.children]="level > 0">
        <th>
            <span [ngStyle]="{'margin-left.px': level * 15}">
                {{ index + 1 }}
            </span>
        </th>
        <td>{{ node.nameVN }}</td>
        <td>{{ node.nameEN }}</td>
        <td>{{ node.priority }}</td>
        <td>###</td>
    </tr>
</ng-template>

<!-- Create Question Group Modal -->
<c-modal id="visibleCreateQuestionGroupModal" [visible]="visibleCreateQuestionGroupModal()" size="lg" backdrop="static"
    (visibleChange)="handleCreateQuestionGroupModalChange($event)">
    <c-modal-header class="bg-success d-flex justify-content-between align-items-center">
        <h5 cModalTitle class="fw-bold text-white">Create Question Group</h5>
        <button (click)="toggleCreateQuestionGroupModal()" class="btn btn-sm btnClose">
            <svg [cIcon]="icons.cilX" width="22" class="text-white" title="Close Icon"></svg>
        </button>
    </c-modal-header>
    <c-modal-body>
        <div class="mb-4">
            <span cLabel class="fw-bold">Search Question Library: </span>
            <app-select-search [options]="optionList" (onChangeValue)="handleQuestionGroupLibraryChange($event)"
                placeholder="Select question group library..."></app-select-search>
        </div>
        <form cForm [formGroup]="createQuestionGroupForm" (ngSubmit)="onSubmitCreateQuestionGroup()">
            <div class="mb-2">
                <label for="priority" cLabel class="me-2">Priority: <span class="text-danger">(*)</span></label>
                <input formControlName="priority" type="number" class="me-2 number-control" min="1" max="255">
                @if (priorityCreateQuestionGroupForm?.invalid && (priorityCreateQuestionGroupForm?.dirty ||
                priorityCreateQuestionGroupForm?.touched)) {
                <div class="text-danger">
                    @if (priorityCreateQuestionGroupForm?.hasError('min') ||
                    priorityCreateQuestionGroupForm?.hasError('max')) {
                    <div>Priority must be between 1 and 255.</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label for="nameEN" cLabel>Name EN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameEN"
                    placeholder="Enter question group name in English">
                @if (nameENCreateQuestionGroupForm?.invalid && (nameENCreateQuestionGroupForm?.dirty ||
                nameENCreateQuestionGroupForm?.touched)) {
                <div class="text-danger">
                    @if (nameENCreateQuestionGroupForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label for="nameVN" cLabel>Name VN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameVN"
                    placeholder="Enter question group name in Vietnamese">
                @if (nameVNCreateQuestionGroupForm?.invalid && (nameVNCreateQuestionGroupForm?.dirty ||
                nameVNCreateQuestionGroupForm?.touched)) {
                <div class="text-danger">
                    @if (nameVNCreateQuestionGroupForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
        </form>
    </c-modal-body>
    <c-modal-footer>
        <button (click)="toggleCreateQuestionGroupModal()" cButton color="secondary">
            <svg [cIcon]="icons.cilExitToApp" width="22" class="text-white" title="Exit to app Icon"></svg>
        </button>
        <button cButton color="primary" (click)="onSubmitCreateQuestionGroup()"
            [disabled]="createQuestionGroupForm.invalid">
            <svg [cIcon]="icons.cilSave" width="22" class="text-white" title="save Icon"></svg>
        </button>
    </c-modal-footer>
</c-modal>

<!-- Update Question Group Modal -->
<c-modal id="visibleUpdateQuestionGroupModal" [visible]="visibleUpdateQuestionGroupModal()" size="lg" backdrop="static"
    (visibleChange)="handleUpdateQuestionGroupModalChange($event)">
    <c-modal-header class="bg-primary d-flex justify-content-between align-items-center">
        <Question cModalTitle class="text-white fw-bold">Update Question Group</Question>
        <button (click)="toggleUpdateQuestionGroupModal()" class="btn btn-sm btnClose">
            <svg [cIcon]="icons.cilX" width="22" class="text-white" title="Close Icon"></svg>
        </button>
    </c-modal-header>
    <c-modal-body>
        <form cForm [formGroup]="updateQuestionGroupForm" (ngSubmit)="onSubmitUpdateQuestionGroup()">
            <div class="mb-2">
                <label for="priority" cLabel class="me-2">Priority: <span class="text-danger">(*)</span></label>
                <input formControlName="priority" type="number" class="me-2 number-control" min="1" max="255">
                @if (priorityUpdateQuestionGroupForm?.invalid && (priorityUpdateQuestionGroupForm?.dirty ||
                priorityUpdateQuestionGroupForm?.touched)) {
                <div class="text-danger">
                    @if (priorityUpdateQuestionGroupForm?.hasError('min') ||
                    priorityUpdateQuestionGroupForm?.hasError('max')) {
                    <div>Priority must be between 1 and 255.</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label for="nameEN" cLabel>Name EN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameEN"
                    placeholder="Enter question group name in English">
                @if (nameENUpdateQuestionGroupForm?.invalid && (nameENUpdateQuestionGroupForm?.dirty ||
                nameENUpdateQuestionGroupForm?.touched)) {
                <div class="text-danger">
                    @if (nameENUpdateQuestionGroupForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label for="nameVN" cLabel>Name VN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameVN"
                    placeholder="Enter question group name in Vietnamese">
                @if (nameVNUpdateQuestionGroupForm?.invalid && (nameVNUpdateQuestionGroupForm?.dirty ||
                nameVNUpdateQuestionGroupForm?.touched)) {
                <div class="text-danger">
                    @if (nameVNUpdateQuestionGroupForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
        </form>
    </c-modal-body>
    <c-modal-footer>
        <button (click)="toggleUpdateQuestionGroupModal()" cButton color="secondary">
            <svg [cIcon]="icons.cilExitToApp" width="22" class="text-white" title="Close Icon"></svg>
        </button>
        <button cButton color="primary" (click)="onSubmitUpdateQuestionGroup()"
            [disabled]="updateQuestionGroupForm.invalid">
            <svg [cIcon]="icons.cilSave" width="22" class="text-white" title="Save Icon"></svg>
        </button>
    </c-modal-footer>
</c-modal>

<!-- Delete Question Group Modal -->
<c-modal id="visibleDeleteQuestionGroupModal" [visible]="visibleDeleteQuestionGroupModal()"
    (visibleChange)="handleDeleteQuestionGroupModalChange($event)">
    <c-modal-header class="bg-danger d-flex justify-content-between align-items-center">
        <h5 cModalTitle class="text-white fw-bold">Delete Question Group</h5>
        <button (click)="toggleDeleteQuestionGroupModal()" class="btn btn-sm btnClose">
            <svg [cIcon]="icons.cilX" width="22" class="text-white" title="Close Icon"></svg>
        </button>
    </c-modal-header>
    <c-modal-body>
        <p>Are you sure you want to delete this question group?</p>
        @if(deleteQuestionGroupIndex() !== -1 && questionGroups[deleteQuestionGroupIndex()]) {
        <div class="alert alert-warning">
            <strong>Question Group:</strong> {{ questionGroups[deleteQuestionGroupIndex()].nameEN }} / {{ questionGroups[deleteQuestionGroupIndex()].nameVN }}
        </div>
        }
    </c-modal-body>
    <c-modal-footer>
        <button (click)="toggleDeleteQuestionGroupModal()" cButton color="secondary">
            <svg [cIcon]="icons.cilExitToApp" width="22" class="text-white" title="Exit to app Icon"></svg>
        </button>
        <button cButton (click)="confirmDeleteQuestionGroup()" color="danger">
            <svg [cIcon]="icons.cilTrash" width="22" class="text-white" title="Trash Icon"></svg>
        </button>
    </c-modal-footer>
</c-modal>

<!-- Create Question Modal -->
<c-modal id="visibleCreateQuestionModal" [visible]="visibleCreateQuestionModal()" size="lg" backdrop="static"
    (visibleChange)="handleCreateQuestionModalChange($event)">
    <c-modal-header class="bg-success d-flex justify-content-between align-items-center">
        <h5 cModalTitle class="text-white fw-bold">Create Question</h5>
        <button (click)="toggleCreateQuestionModal()" class="btn btn-sm btnClose">
            <svg [cIcon]="icons.cilX" width="22" class="text-white" title="Close Icon"></svg>
        </button>
    </c-modal-header>
    <c-modal-body>
        <form cForm [formGroup]="createQuestionForm" (ngSubmit)="onSubmitCreateQuestion()">
            <div class="mb-3">
                <label cLabel class="me-2">Search Question Library: </label>
                <app-tree-select [options]="treeOptionList" (onChangeValue)="handleQuestionLibraryChange($event)"
                    placeholder="Select question group library..."></app-tree-select>
            </div>
            <div class="mb-2">
                <label for="priority" cLabel class="me-2">Priority: <span class="text-danger">(*)</span></label>
                <input formControlName="priority" type="number" class="me-2 number-control" min="1" max="255">
                @if (priorityCreateQuestionForm?.invalid && (priorityCreateQuestionForm?.dirty ||
                priorityCreateQuestionForm?.touched)) {
                <div class="text-danger">
                    @if (priorityCreateQuestionForm?.hasError('min') ||
                    priorityCreateQuestionForm?.hasError('max')) {
                    <div>Priority must be between 1 and 255.</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label cLabel class="me-2">Question type: <span class="text-danger">(*)</span></label>
                <app-select-search [options]="questionTypeList" [selectedValue]="initQuestionTypeId()"
                    (onChangeValue)="onchangeQuestionType($event)"
                    placeholder="Select question type..."></app-select-search>
            </div>
            <div class="mb-2">
                <label for="nameEN" cLabel>Name EN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameEN"
                    placeholder="Enter question group name in English">
                @if (nameENCreateQuestionForm?.invalid && (nameENCreateQuestionForm?.dirty ||
                nameENCreateQuestionForm?.touched)) {
                <div class="text-danger">
                    @if (nameENCreateQuestionForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label for="nameVN" cLabel>Name VN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameVN"
                    placeholder="Enter question group name in Vietnamese">
                @if (nameVNCreateQuestionForm?.invalid && (nameVNCreateQuestionForm?.dirty ||
                nameVNCreateQuestionForm?.touched)) {
                <div class="text-danger">
                    @if (nameVNCreateQuestionForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
        </form>
        @if(showPredefinedAnswerTable()) {
        <div class="d-flex justify-content-end mb-2">
            <button (click)="toggleCreatePredefinedAnswerModal()" cButton type="button"
                class="ms-2 btn-success text-white d-flex align-items-center justify-content-center">
                <svg [cIcon]="icons.cilPlus" width="25" class="text-white" title="Plus Icon"></svg>
                <span>Predefined Answer</span>
            </button>
        </div>
        <c-accordion>
            <c-accordion-item #item0="cAccordionItem" [visible]="true">
                <ng-template cTemplateId="accordionHeaderTemplate">
                    <button (click)="item0.toggleItem()" [collapsed]="!item0.visible" cAccordionButton>
                        Answer List
                    </button>
                </ng-template>
                <ng-template cTemplateId="accordionBodyTemplate">
                    <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>NameEN</th>
                                <th>NameVN</th>
                                <th>Priority</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (item of predefinedAnswerList; track $index; let i = $index) {
                            <tr>
                                <td>{{ i + 1 }}</td>
                                <td>{{ item.nameEN }}</td>
                                <td>{{ item.nameVN }}</td>
                                <td>{{ item.priority }}</td>
                                <td class="d-flex justify-content-center">
                                    <button cButton type="button" (click)="updatePredefinedAnswer(i)" class="btn btn-warning me-2">Update</button>
                                    <button cButton type="button" (click)="deletePredefinedAnswer(i)" class="btn btn-danger">Delete</button>
                                </td>
                            </tr>
                            }
                        </tbody>
                    </table>
                </ng-template>
            </c-accordion-item>
        </c-accordion>
        }
    </c-modal-body>
    <c-modal-footer>
        <button (click)="toggleCreateQuestionModal()" cButton color="secondary">
            <svg [cIcon]="icons.cilExitToApp" width="22" class="text-white" title="Exit to app Icon"></svg>
        </button>
        <button cButton color="primary" [disabled]="createQuestionForm.invalid" (click)="onSubmitCreateQuestion()">
            <svg [cIcon]="icons.cilSave" width="22" class="text-white" title="Save Icon"></svg>
        </button>
    </c-modal-footer>
</c-modal>

<!-- Update Question Modal -->
<c-modal id="visibleUpdateQuestionModal" [visible]="visibleUpdateQuestionModal()" size="lg" backdrop="static"
    (visibleChange)="handleUpdateQuestionModalChange($event)">
    <c-modal-header class="bg-primary d-flex justify-content-between align-items-center">
        <h5 cModalTitle class="text-white fw-bold">Update Question</h5>
        <button (click)="toggleUpdateQuestionModal()" class="btn btn-sm btnClose">
            <svg [cIcon]="icons.cilX" width="22" class="text-white" title="Close Icon"></svg>
        </button>
    </c-modal-header>
    <c-modal-body>
        <form cForm [formGroup]="updateQuestionForm" (ngSubmit)="onSubmitUpdateQuestion()">
            <div class="mb-2">
                <label for="priority" cLabel class="me-2">Priority: <span class="text-danger">(*)</span></label>
                <input formControlName="priority" type="number" class="me-2 number-control" min="1" max="255">
                @if (priorityUpdateQuestionForm?.invalid && (priorityUpdateQuestionForm?.dirty ||
                priorityUpdateQuestionForm?.touched)) {
                <div class="text-danger">
                    @if (priorityUpdateQuestionForm?.hasError('min') ||
                    priorityUpdateQuestionForm?.hasError('max')) {
                    <div>Priority must be between 1 and 255.</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label cLabel class="me-2">Question type: <span class="text-danger">(*)</span></label>
                <app-select-search [options]="questionTypeList" [selectedValue]="initQuestionTypeId()"
                    (onChangeValue)="onchangeQuestionType($event)"
                    placeholder="Select question type..."></app-select-search>
            </div>
            <div class="mb-2">
                <label for="nameEN" cLabel>Name EN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameEN"
                    placeholder="Enter question name in English">
                @if (nameENUpdateQuestionForm?.invalid && (nameENUpdateQuestionForm?.dirty ||
                nameENUpdateQuestionForm?.touched)) {
                <div class="text-danger">
                    @if (nameENUpdateQuestionForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
            <div class="mb-2">
                <label for="nameVN" cLabel>Name VN: <span class="text-danger">(*)</span></label>
                <input type="text" cFormControl formControlName="nameVN"
                    placeholder="Enter question name in Vietnamese">
                @if (nameVNUpdateQuestionForm?.invalid && (nameVNUpdateQuestionForm?.dirty ||
                nameVNUpdateQuestionForm?.touched)) {
                <div class="text-danger">
                    @if (nameVNUpdateQuestionForm?.hasError('required')) {
                    <div>Enter Name, please!</div>
                    }
                </div>
                }
            </div>
        </form>
        @if(showPredefinedAnswerTable()) {
        <div class="d-flex justify-content-end mb-2">
            <button (click)="toggleCreatePredefinedAnswerModal()" cButton type="button"
                class="ms-2 btn-success text-white d-flex align-items-center justify-content-center">
                <svg [cIcon]="icons.cilPlus" width="25" class="text-white" title="Plus Icon"></svg>
                <span>Predefined Answer</span>
            </button>
        </div>
        <c-accordion>
            <c-accordion-item #item1="cAccordionItem" [visible]="true">
                <ng-template cTemplateId="accordionHeaderTemplate">
                    <button (click)="item1.toggleItem()" [collapsed]="!item1.visible" cAccordionButton>
                        Answer List
                    </button>
                </ng-template>
                <ng-template cTemplateId="accordionBodyTemplate">
                    <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>NameEN</th>
                                <th>NameVN</th>
                                <th>Priority</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (item of predefinedAnswerList; track $index; let i = $index) {
                            <tr>
                                <td>{{ i + 1 }}</td>
                                <td>{{ item.nameEN }}</td>
                                <td>{{ item.nameVN }}</td>
                                <td>{{ item.priority }}</td>
                                <td class="d-flex justify-content-center">
                                    <button cButton type="button" class="btn btn-warning me-2">Update</button>
                                    <button cButton type="button" class="btn btn-danger">Delete</button>
                                </td>
                            </tr>
                            }
                        </tbody>
                    </table>
                </ng-template>
            </c-accordion-item>
        </c-accordion>
        }
    </c-modal-body>
    <c-modal-footer>
        <button (click)="toggleUpdateQuestionModal()" cButton color="secondary">
            <svg [cIcon]="icons.cilExitToApp" width="22" class="text-white" title="Close Icon"></svg>
        </button>
        <button cButton color="primary" [disabled]="updateQuestionForm.invalid" (click)="onSubmitUpdateQuestion()">
            <svg [cIcon]="icons.cilSave" width="22" class="text-white" title="Save Icon"></svg>
        </button>
    </c-modal-footer>
</c-modal>

<!-- Delete Question Modal -->
<c-modal id="visibleDeleteQuestionModal" [visible]="visibleDeleteQuestionModal()"
    (visibleChange)="handleDeleteQuestionModalChange($event)">
    <c-modal-header class="bg-danger d-flex justify-content-between align-items-center">
        <h5 cModalTitle class="text-white fw-bold">Delete Question</h5>
        <button (click)="toggleDeleteQuestionModal()" class="btn btn-sm btnClose">
            <svg [cIcon]="icons.cilX" width="22" class="text-white" title="Close Icon"></svg>
        </button>
    </c-modal-header>
    <c-modal-body>
        <p>Are you sure you want to delete this question?</p>
        @if(deleteQuestionIndex() !== -1 && questions[deleteQuestionIndex()]) {
        <div class="alert alert-warning">
            <strong>Question:</strong> {{ questions[deleteQuestionIndex()].nameEN }} / {{ questions[deleteQuestionIndex()].nameVN }}
        </div>
        }
        <p class="text-muted">This action cannot be undone.</p>
    </c-modal-body>
    <c-modal-footer>
        <button (click)="toggleDeleteQuestionModal()" cButton color="secondary">
            <svg [cIcon]="icons.cilExitToApp" width="22" class="text-white" title="Exit to app Icon"></svg>
        </button>
        <button cButton (click)="confirmDeleteQuestion()" color="danger">
            <svg [cIcon]="icons.cilTrash" width="22" class="text-white" title="Trash Icon"></svg>
        </button>
    </c-modal-footer>
</c-modal>

<!-- Create Predefined Answer Modal -->
<!-- <c-modal id="visibleCreatePredefinedAnswerModal" [visible]="visibleCreatePredefinedAnswerModal()" backdrop="static"
    size="lg" (visibleChange)="handleCreatePredefinedAnswerModalChange($event)">
    <c-modal-header>
        <h5 cModalTitle>Create Answer</h5>
    </c-modal-header>
    <form cForm [formGroup]="createPredefinedAnswerForm" (ngSubmit)="onSubmitCreatePredefinedAnswer()">
        <c-modal-body>
            <div class="mb-2 d-flex flex-row">
                <div>
                    <label for="priority" class="me-2">Priority: </label>
                    <input formControlName="priority" type="number" class="me-2 number-control" min="1" max="255">
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-md-6">
                    <label cLabel for="nameEN" class="me-2">NameEN: <span class="text-danger">(*)</span> </label>
                    <input cFormControl formControlName="nameEN">
                </div>
                <div class="col-12 col-md-6">
                    <label cLabel for="nameVN">NameVN: <span class="text-danger">(*)</span></label>
                    <input cFormControl formControlName="nameVN">
                </div>
            </div>
        </c-modal-body>
        <c-modal-footer>
            <button (click)="toggleCreatePredefinedAnswerModal()" cButton color="secondary">
                Close
            </button>
            <button cButton type="submit" [disabled]="!createPredefinedAnswerForm.valid" color="primary">Save</button>
        </c-modal-footer>
    </form>
</c-modal> -->
<!-- Update Predefined Answer Modal -->
<!-- <c-modal id="visibleUpdatePredefinedAnswerModal" [visible]="visibleUpdatePredefinedAnswerModal()" backdrop="static"
    size="lg" (visibleChange)="handleUpdatePredefinedAnswerModalChange($event)">
    <c-modal-header>
        <h5 cModalTitle>Update Predefined Answer</h5>
    </c-modal-header>
    <form cForm [formGroup]="updatePredefinedAnswerForm" (ngSubmit)="onSubmitUpdatePredefinedAnswer()">
        <c-modal-body>
            <div class="mb-2 d-flex flex-row">
                <div>
                    <label for="priority" class="me-2">Priority: </label>
                    <input formControlName="priority" type="number" class="me-2 number-control" min="1" max="255">
                </div>
            </div>
            <div class="mb-2 row">
                <div class="col-12 col-md-6">
                    <label cLabel for="nameEN" class="me-2">NameEN: <span class="text-danger">(*)</span> </label>
                    <input cFormControl formControlName="nameEN">
                </div>
                <div class="col-12 col-md-6">
                    <label cLabel for="nameVN">NameVN: <span class="text-danger">(*)</span></label>
                    <input cFormControl formControlName="nameVN">
                </div>
            </div>
        </c-modal-body>
        <c-modal-footer>
            <button (click)="toggleUpdatePredefinedAnswerModal()" cButton color="secondary">
                Close
            </button>
            <button cButton type="submit" [disabled]="!updatePredefinedAnswerForm.valid" color="primary">Save</button>
        </c-modal-footer>
    </form>
</c-modal> -->
