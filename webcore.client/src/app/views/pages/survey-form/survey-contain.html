<div class="surveyPage">
  <div class="surveyFormContainer">
    <div class="header">
      <span class="fw-bold">Lulusia Kingdom</span>
      <span class="fw-bold">EN</span>
    </div>
    <div class="body">
      <h3 class="surveyTitle mb-4">{{surveyForm?.titleVN}}</h3>
      <p class="surveyDescription">{{surveyForm?.descriptionVN}}</p>
      <!-- Question Groups -->
       @if((surveyForm?.questions?.length ?? 0) > 0 && (surveyForm?.questionGroups?.length ?? 0) > 0) {
          <h5>I. Question Groups</h5>
       }
      @for(questionGroup of surveyForm?.questionGroups; track questionGroup.id; let i = $index) {
      <h5 class="questionGroupTitle">{{i + 1}}. {{questionGroup.nameVN}}</h5>
        <!-- Questions within the group -->
        @for(question of questionGroup.questions; track question.id; let j = $index) {
          <h6 class="questionTitle ms-2">{{i + 1}}.{{j + 1}}. {{question.nameVN}}</h6>
          <!-- Render question by question type -->
          @if(question.questionTypeId === questionTypes.ClosedEndedQuestion){
            <ul class="radioGroup">
              @for(predefinedAnswer of question.predefinedAnswers; track predefinedAnswer.id) {
                <li>
                    <input type="radio" id="predefinedAnswer_{{predefinedAnswer.id}}" name="question_{{question.id}}" value="{{predefinedAnswer.id}}">
                    <label for="predefinedAnswer_{{predefinedAnswer.id}}">{{predefinedAnswer.nameVN}}</label>
                </li>
              }
            </ul>
          }
        }
      }
      <!-- Questions -->
       @if((surveyForm?.questions?.length ?? 0) > 0 && (surveyForm?.questionGroups?.length ?? 0) > 0) {
         <h5 class="mt-4">II. Single Questions</h5>
       }
      @for(item of surveyForm?.questions; track item.id; let i = $index) {
      <h5 class="questionTitle ms-2">{{i + 1}}. {{item.nameVN}}</h5>
        <!-- Render question by question type -->
        @if(item.questionTypeId === questionTypes.ClosedEndedQuestion){
          <ul class="d-flex justify-content-between flex-wrap">
            @for(predefinedAnswer of item.predefinedAnswers; track predefinedAnswer.id) {
              <li>{{predefinedAnswer.nameVN}}</li>
            }
          </ul>
        }
      }
  
      <form cForm [formGroup]="participantForm" (ngSubmit)="onSubmit()">
        <div class="mb-2 row">
          <div class="col-12 col-md-4">
            <label cLabel for="fullName">Full Name: <span class="text-danger">(*)</span></label>
            <input cFormControl formControlName="fullName">
            @if (fullName?.invalid && (fullName?.dirty || fullName?.touched)) {
            <div class="text-danger">
              @if (fullName?.hasError('required')) {
              Full Name is required.
              }
            </div>
            }
          </div>
          <div class="col-12 col-md-4">
            <label cLabel for="phoneNumber">Phone number: <span class="text-danger">(*)</span></label>
            <input cFormControl formControlName="phoneNumber">
            @if (phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)) {
            <div class="text-danger">
              @if (phoneNumber?.hasError('required')) {
              Phone number is required.
              }
            </div>
            }
          </div>
          <div class="col-12 col-md-4">
            <label cLabel for="email">Email:</label>
            <input cFormControl formControlName="email">
            <!-- @if (email?.invalid && (email?.dirty || email?.touched)) {
            <div class="text-danger">
              @if (email?.hasError('required')) {
              Email is required.
              }
            </div>
            } -->
          </div>
        </div>
        <div class="d-flex justify-content-center mt-4">
          <button class="btn btnSubmit" type="submit" [disabled]="!participantForm.valid">
            Submit
          </button>
        </div>
      </form>

    </div>
  </div>
</div>